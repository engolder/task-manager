# Claude Code 작업 가이드

## 1. Claude Code 기본 동작 원칙

### 1.1 기본 워크플로우
- Claude Code의 기본적인 작업 방식을 유지
- 사용자 요청을 직접적이고 효율적으로 처리
- TodoWrite 도구를 활용한 체계적 작업 관리

### 1.2 워크로그 기록
- 모든 작업 완료 후 `worklogs/[주제].md` 파일에 작업 내용 기록
- 작업 과정, 문제점, 해결 방안, 결과 등을 상세히 문서화
- 향후 유사 작업 시 참고할 수 있도록 구조화된 형태로 작성

### 1.3 작업 진행 방식
- 사용자 요청 즉시 분석 및 작업 시작
- 복잡한 작업의 경우 TodoWrite로 단계별 계획 수립
- 각 단계 완료 시 진행 상황 업데이트

## 2. Git 및 PR 관리

### 2.1 브랜치 전략
- 작업 내용을 1~4개의 영어 단어로 요약하여 브랜치명 결정
  - 예: `add-todo-feature`
  - 예: `fix-auth-bug`
  - 예: `update-ui-components`
  - 예: `refactor-api-client`

### 2.2 커밋 및 브랜치 관리

#### 현재 브랜치 상태 확인
```bash
# 현재 브랜치 확인
git branch --show-current
```

#### 브랜치별 처리 방법
- **main 브랜치인 경우**: 새로운 브랜치 생성 후 작업 진행
- **기존 브랜치인 경우**: 
  1. main과의 관계 확인
  2. 열린 PR 존재 여부 확인
  3. 현재 변경사항이 기존 PR과 연관성 있는지 판단
  4. 필요시 새 브랜치 생성

### 2.3 PR 생성 가이드라인

#### PR 제목 규칙
- 형식: "[작업 유형] 구체적인 작업 내용 설명"
- 작업의 의도와 영향을 명확하게 표현
- 예시:
  - ✅ "[Feature] Add drag-and-drop reordering to todo list"
  - ✅ "[Fix] Prevent token expiration during active user session"
  - ❌ "[Feature] Update todo feature"
  - ❌ "[Fix] Fix auth bug"

#### PR 본문 구조
```bash
gh pr create \
  --title "[작업 유형] 작업 제목" \
  --body "## 작업 개요
- 목적: [작업의 주요 목적]
- 변경사항: [주요 변경 내용]

## 아키텍처 및 설계 결정
- 선택한 아키텍처/패턴: [설명]
- 대안과 비교: [다른 접근 방식들과 비교]
- 선택 이유: [이 방식을 선택한 이유]

## 기술 스택 및 라이브러리
- 사용/추가된 기술: [기술명과 버전]
- 기술 선택 배경: [왜 이 기술을 선택했는지]

## 성능 및 보안 고려사항
- 성능 영향: [성능에 미치는 영향]
- 잠재적 이슈: [예상되는 문제점]
- 대응 방안: [이슈 해결을 위한 접근 방법]" \
  --assignee "@me"
```

### 2.4 PR 머지 정책
- 모든 PR은 반드시 squash 머지로 진행
- 머지 후 로컬/원격 브랜치 자동 삭제
```bash
gh pr merge [PR번호] --squash --delete-branch
```

## 3. 품질 관리

### 3.1 코드 수정 원칙
- **최소 변경 원칙 준수**
  - 요청된 변경사항에만 집중
  - 불필요한 코드 재작성 지양
  - 기존 코드의 의도와 맥락 유지

- **변경 범위 명확화**
  - 수정이 필요한 부분을 명확히 식별
  - 연관된 부분에 미치는 영향 검토
  - 의도하지 않은 변경사항 방지

### 3.2 코드 리뷰 체크리스트
변경사항 적용 전 다음 사항 확인:
- [ ] 요청된 변경사항만 포함되었는가?
- [ ] 기존 기능이 그대로 유지되는가?
- [ ] UI/스타일링이 의도치 않게 변경되지 않았는가?
- [ ] 연관된 테스트가 모두 통과하는가?
- [ ] 성능에 부정적 영향을 주지 않는가?

## 4. 문제 해결 및 커뮤니케이션

### 4.1 문제 해결 원칙
- 오류 상황 명확히 파악하고 원인 분석
- 해결 방안의 영향도 평가 후 사용자에게 제시
- 환경 설정 문제는 영구적 해결 방안 우선 제시

### 4.2 커뮤니케이션 원칙
- 명확하고 구조화된 형식으로 보고
- 전문 용어 사용 시 설명 추가
- 대안이 있는 경우 장단점과 함께 제시
- 기술적 제안 시 근거와 예상 효과 제시

## 5. 워크로그 작성 가이드

### 5.1 워크로그 구조
```markdown
# [작업 제목]

## 작업 개요
- 목적: [작업의 목적]
- 범위: [작업 범위]
- 시작일: [YYYY-MM-DD]
- 완료일: [YYYY-MM-DD]

## 작업 과정
### 1. 분석 및 계획
- [요구사항 분석 내용]
- [기술적 접근 방법]

### 2. 구현
- [주요 구현 내용]
- [변경된 파일들]

### 3. 검증 및 테스트
- [테스트 방법]
- [검증 결과]

## 발생한 문제 및 해결
- 문제: [발생한 문제]
- 원인: [문제 원인]
- 해결: [해결 방법]

## 결과 및 영향
- [최종 결과물]
- [코드베이스에 미친 영향]
- [성능/보안 고려사항]

## 향후 개선사항
- [추가 개선 필요사항]
- [기술 부채나 TODO 항목]
```

### 5.2 작성 타이밍
- 작업 완료 직후 즉시 작성
- 복잡한 작업의 경우 중간 진행 상황도 기록
- PR 생성 전 워크로그 작성 완료

## 6. 정보 정확성 관리

### 6.1 정보 출저 우선순위
1. 공식 문서 (최신 버전)
2. 프레임워크/라이브러리의 공식 블로그나 릴리즈 노트
3. 프로젝트 내부 문서 (워크로그 등)
4. 커뮤니티 문서나 블로그 포스트

### 6.2 버전 관리
- 모든 기술 문서 참조 시 반드시 버전 정보 확인
- 프로젝트에서 사용 중인 버전과 문서의 버전이 일치하는지 검증
- 버전 차이가 있는 경우 반드시 사용자에게 고지

### 6.3 워크로그 활용
- 워크로그는 프로젝트의 히스토리와 컨텍스트 파악용으로 활용
- 기술적 구현 방법은 반드시 최신 공식 문서와 대조 확인
- 워크로그의 내용이 최신 공식 문서와 다른 경우 공식 문서 우선

## 7. 코드와 룰의 동기화

### 7.1 코드 변경에 따른 룰 업데이트
- 코드베이스가 변경될 때 관련 룰도 함께 업데이트
- 더 이상 유효하지 않은 예시나 설명 제거
- 새로운 코드 패턴이나 구조를 반영하여 룰 수정

### 7.2 업데이트 프로세스
- 코드 변경 시 관련 룰 파일 검토
- 룰의 예시 코드가 최신 코드베이스와 일치하는지 확인
- 필요한 경우 새로운 예시 추가 또는 기존 예시 수정
- 변경된 코드 구조나 패턴을 룰에 반영

### 7.3 동기화 검증
- 정기적으로 룰의 예시와 실제 코드베이스 비교
- 더 이상 사용되지 않는 패턴이나 구조 식별
- 새롭게 도입된 패턴이나 구조가 룰에 반영되었는지 확인